language: python

node_js:
- '0.10'

python:
- '2.7'
- '3.3'
- '3.4'

before_install:
- sudo apt-get update
- sudo apt-get install -qq libzmq3-dev pandoc libcurl4-gnutls-dev libmemcached-dev
- pip install -U setuptools
- pip install -r requirements-dev.txt
- npm install .

install:
- pip install -r requirements.txt
- invoke bower
- invoke less

script:
  # run tests
  - invoke test
  - docker build --no-cache -t $DOCKER_IMAGE_NAME .
  # tag the build
  - docker tag $DOCKER_IMAGE_NAME $DOCKER_IMAGE_NAME
  # push the image to the repository
  - docker push $DOCKER_IMAGE_NAME:latest
notifications:
  slack: 3blades:kDsouoROcGOm58UyVIvH1XhV 
env:
  - $DOCKER_IMAGE_NAME=3blades/nbviewer